<%- include('../layouts/admin/head', { title: '新增分类' }); %>
    <div class="container">
        <form class="form-horizontal">
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Name</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="name" placeholder="Name">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button id="btn" type="submit" class="btn btn-default">Submit</button>
                </div>
            </div>
        </form>
    </div>
    <script>
        $('#btn').click(function (e) {
            e.preventDefault();
            addRequest('/api/categories', {
                name: $('#name').val()
            })
            .then(data => {
                if(data.code){
                    alert('添加成功')
                    location.reload();
                }
            })
        })
        function addRequest(url, data, success) {
            return $.ajax({
                type: 'POST',
                url,
                data,
                success
            })
        }
    </script>